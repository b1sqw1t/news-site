{% extends 'base/main.html' %}
{% load staticfiles %}

{% block title %} {{ title }} {% endblock %}

{% block category %}
    {% if  category  %}
        {% for cat in category %}
        <li><a href="/{{cat.0}}"> {{cat.1}}</a></li>
        {% endfor %}
    {% else %}
        <p> Категории отсутсвуют</p>
    {% endif %}
{% endblock%}

{% block news%}
    {% if object_list %}
        {% for news in object_list %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div align="right">
                        <div class="btn-group" role="group" aria-label="...">
                            <button type="button" class="btn btn-default"><a href="{% url 'edit_news' %}{{news.id}}"><i class="glyphicon glyphicon-pencil"></i></a></button>
                            <button type="button" class="btn btn-default"><a href="{% url 'delete_news' %}{{news.id}}"><i class="glyphicon glyphicon-trash"></i></a></button>
                        </div>
                    </div>
                    <!--- ВЫВОД ССЫЛКИ НА ПОИСК АВТОРА ПО ИМЕНИ И ФАМИЛИИ -->
                    {% for name in authors %}
                    {% if  name.0 == news.news_authors  %}
                    <div>
                        <div align="left">
                           Корреспондент :  <a href="/author/{{name.0}}">{{ name.1 }}</a>&nbsp&nbsp
                    {% endif %}
                    {% endfor %}
                     <!--- ВЫВОД ССЫЛКИ НА ПОИСК АВТОРА ПО ИМЕНИ И ФАМИЛИИ -->

                    {{ news.news_date|date:"H:i" }}&nbsp&nbsp
                    {{ news.news_date|date:"d.m.Y" }}
                                </div>

                            </div>

                </div>
                <div class="panel-body" style="font-size:30px"><a href="{% url 'post' %}?post={{ news.id }}">{{news.news_title}}</a></div>
                <div class="panel-footer">
                    {{ news.news_category }}  |  <i class="glyphicon glyphicon-thumbs-up"></i> {{ news.news_liked }}
                            &nbsp&nbsp&nbsp &nbsp|&nbsp&nbsp&nbsp&nbspПросмотров : {{news.news_views}}
                </div>
                </div>
                    {% if  not forloop.last  %}
                        <br>
                    {% endif %}
        {% endfor %}
        <center>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    {% if  page_obj.has_previous  %}
                        {% if  category_now  %}
                        <li><a href="{% url 'index' category=category_now%}?page={{page_obj.previous_page_number}}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                        {% else %}
                        <li><a href="{% url 'index' %}?page={{page_obj.previous_page_number}}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                        {% endif %}
                    {% endif %}
                    {% if  page_obj.has_other_pages  %}
                        {% for pn in page_obj.paginator.page_range %}
                            {% if  category_now  %}
                                {% if  pn != page_obj.number  %}
                                    <li><a href="{% url 'index' category=category_now %}?page={{ pn }}">{{ pn }}</a></li>
                                {% else %}
                                    <li class="active"><a href="">{{ pn }} <span class="sr-only">(current)</span></a></li>
                                {% endif %}
                            {% else %}
                                {% if  pn != page_obj.number  %}
                                    <li><a href="{% url 'index' %}?page={{ pn }}">{{ pn }}</a></li>
                                {% else %}
                                    <li class="active"><a href="">{{ pn }} <span class="sr-only">(current)</span></a></li>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if  page_obj.has_next  %}
                        {% if  category_now  %}
                            <li><a href="{% url 'index' category=category_now %}?page={{page_obj.next_page_number}}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                        {% else %}
                            <li><a href="{% url 'index' %}?page={{page_obj.next_page_number}}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                        {% endif %}
                    {% endif %}
                </ul>
            </nav>
        </center>
    {% else %}
        <p>НОВОСТИ ОТСУТСТВУЮТ</p>
    {% endif %}
{% endblock %}